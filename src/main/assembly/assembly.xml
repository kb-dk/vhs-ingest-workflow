<assembly>

    <id>bundle</id>

    <formats>
        <format>tar.gz</format>
    </formats>
    <!--<includeBaseDirectory>false</includeBaseDirectory>-->

    <dependencySets>
        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${workflow.dependencies.dir}</outputDirectory>
            <directoryMode>0744</directoryMode>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <includes>
                <include>com.googlecode.json-simple:json-simple</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${install.components.dir}/${ffprobe.characteriser}/bin</outputDirectory>
            <directoryMode>0744</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <includes>
                <include>${medieplatform}:${ffprobe.characteriser}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${install.components.dir}/${profile.validator}/bin</outputDirectory>
            <directoryMode>0744</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <includes>
                <include>${medieplatform}:${profile.validator}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${install.components.dir}/${bitrepository.ingester}/external-products</outputDirectory>
            <directoryMode>0755</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <unpackOptions>
                <excludes>
                    <exclude>${bitrepository.ingester}-*</exclude>
                </excludes>
            </unpackOptions>
            <includes>
                <include>${medieplatform}:${bitrepository.ingester}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>
        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${install.components.dir}/${bitrepository.ingester}/bin</outputDirectory>
            <directoryMode>0755</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <unpackOptions>
                <includes>
                    <include>${bitrepository.ingester}-*</include>
                </includes>
            </unpackOptions>
            <includes>
                <include>${medieplatform}:${bitrepository.ingester}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${install.components.dir}/${doms.ingester.project}/external-products</outputDirectory>
            <directoryMode>0744</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <unpackOptions>
                <excludes>
                    <exclude>${doms.ingester.project}-*.jar</exclude>
                </excludes>
            </unpackOptions>
            <includes>
                <include>${medieplatform}:${doms.ingester.project}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${install.components.dir}/${doms.ingester.project}/bin</outputDirectory>
            <directoryMode>0744</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <unpackOptions>
                <includes>
                    <include>${doms.ingester.project}-*.jar</include>
                </includes>
            </unpackOptions>
            <includes>
                <include>${medieplatform}:${doms.ingester.project}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${install.components.dir}/${doms.ingester.vhsfile}/external-products</outputDirectory>
            <directoryMode>0744</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <unpackOptions>
                <excludes>
                    <exclude>${doms.ingester.vhsfile}-*.jar</exclude>
                </excludes>
            </unpackOptions>
            <includes>
                <include>${medieplatform}:${doms.ingester.vhsfile}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${install.components.dir}/${doms.ingester.vhsfile}/bin</outputDirectory>
            <directoryMode>0744</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <unpackOptions>
                <includes>
                    <include>${doms.ingester.vhsfile}-*.jar</include>
                </includes>
            </unpackOptions>
            <includes>
                <include>${medieplatform}:${doms.ingester.vhsfile}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${install.components.dir}/${radiotv.doms.metadata.packager}/external-products</outputDirectory>
            <directoryMode>0755</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <unpackOptions>
                <excludes>
                    <exclude>${radiotv.doms.metadata.packager}-*.jar</exclude>
                </excludes>
            </unpackOptions>
            <includes>
                <include>${medieplatform}:${radiotv.doms.metadata.packager}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>
        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${install.components.dir}/${radiotv.doms.metadata.packager}/bin</outputDirectory>
            <directoryMode>0755</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <unpackOptions>
                <includes>
                    <include>${radiotv.doms.metadata.packager}-*.jar</include>
                </includes>
            </unpackOptions>
            <includes>
                <include>${medieplatform}:${radiotv.doms.metadata.packager}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

    </dependencySets>

    <fileSets>
        <fileSet>
            <outputDirectory>${install.bin.dir}</outputDirectory>
            <directory>src/main/bin</directory>
            <directoryMode>0744</directoryMode>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </fileSet>
        <fileSet>
            <outputDirectory>integrationTests</outputDirectory>
            <directory>src/main/integrationTests</directory>
            <directoryMode>0744</directoryMode>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </fileSet>
        <fileSet>
            <outputDirectory>${install.script.dir}</outputDirectory>
            <directory>src/main/env</directory>
            <directoryMode>0744</directoryMode>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </fileSet>
        <fileSet>
            <outputDirectory>${install.components.dir}</outputDirectory>
            <directory>src/main/components</directory>
            <directoryMode>0744</directoryMode>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </fileSet>

        <fileSet>
            <outputDirectory>${workflow.dir}</outputDirectory>
            <directoryMode>0744</directoryMode>
            <directory>src/main/taverna</directory>
            <filtered>true</filtered>
        </fileSet>

        <fileSet>
            <outputDirectory>examples</outputDirectory>
            <directoryMode>0744</directoryMode>
            <directory>src/main/examples</directory>
        </fileSet>
    </fileSets>

    <files>
        <file>
            <source>src/main/scripts/bitstorage.ingest.sh</source>
            <outputDirectory>${install.script.dir}</outputDirectory>
            <destName>${bitstorage.ingest}.sh</destName>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/scripts/ffprobe.characteriser.sh</source>
            <outputDirectory>${install.script.dir}</outputDirectory>
            <destName>${ffprobe.characteriser}.sh</destName>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/scripts/ffprobe.profile.validator.sh</source>
            <outputDirectory>${install.script.dir}</outputDirectory>
            <destName>${ffprobe.profile.validator}.sh</destName>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/scripts/doms.ingester.vhsfile.sh</source>
            <outputDirectory>${install.script.dir}</outputDirectory>
            <destName>${doms.ingester.vhsfile}.sh</destName>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/scripts/doms.ingester.vhsclip.sh</source>
            <outputDirectory>${install.script.dir}</outputDirectory>
            <destName>${doms.ingester.vhsclip}.sh</destName>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </file>

        <file>
            <source>src/main/scripts/workflow.completed.sh</source>
            <outputDirectory>${install.script.dir}</outputDirectory>
            <destName>${workflow.completed}.sh</destName>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/scripts/workflow.started.sh</source>
            <outputDirectory>${install.script.dir}</outputDirectory>
            <destName>${workflow.started}.sh</destName>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/scripts/radiotv.doms.metadata.packager.sh</source>
            <outputDirectory>${install.script.dir}</outputDirectory>
            <destName>${radiotv.doms.metadata.packager}.sh</destName>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/scripts/program.metadata.extractor.sh</source>
            <outputDirectory>${install.script.dir}</outputDirectory>
            <destName>${program.metadata.extractor}.sh</destName>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/scripts/file.copier.sh</source>
            <outputDirectory>${install.script.dir}</outputDirectory>
            <destName>${file.copier}.sh</destName>
            <fileMode>0744</fileMode>
            <filtered>true</filtered>
        </file>
    </files>

</assembly>

