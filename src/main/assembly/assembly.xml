<assembly>

    <id>bundle</id>

    <formats>
        <format>zip</format>
    </formats>
    <!--<includeBaseDirectory>false</includeBaseDirectory>-->

    <dependencySets>
        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${vhsingest.workflow.dependencies}</outputDirectory>
            <directoryMode>0744</directoryMode>
            <useTransitiveDependencies>true</useTransitiveDependencies>
            <useTransitiveFiltering>true</useTransitiveFiltering>
            <includes>
                <include>com.googlecode.json-simple:json-simple</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${vhsingest.components.dir}/${ffprobe.characteriser}/bin</outputDirectory>
            <directoryMode>0744</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <includes>
                <include>${medieplatform}:${ffprobe.characteriser}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${vhsingest.components.dir}/${profile.validator}/bin</outputDirectory>
            <directoryMode>0744</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <includes>
                <include>${medieplatform}:${profile.validator}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${vhsingest.components.dir}/${vhsingest.bitrepository.ingester}/external-products</outputDirectory>
            <directoryMode>0755</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <unpackOptions>
                <excludes>
                    <exclude>${vhsingest.bitrepository.ingester}-*</exclude>
                </excludes>
            </unpackOptions>
            <includes>
                <include>${medieplatform}:${vhsingest.bitrepository.ingester}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>
        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${vhsingest.components.dir}/${vhsingest.bitrepository.ingester}/bin</outputDirectory>
            <directoryMode>0755</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <unpackOptions>
                <includes>
                    <include>${vhsingest.bitrepository.ingester}-*</include>
                </includes>
            </unpackOptions>
            <includes>
                <include>${medieplatform}:${vhsingest.bitrepository.ingester}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${vhsingest.components.dir}/${vhsingest.doms.ingester}/external-products</outputDirectory>
            <directoryMode>0744</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <unpackOptions>
                <excludes>
                    <exclude>${vhsingest.doms.ingester}-*.jar</exclude>
                </excludes>
            </unpackOptions>
            <includes>
                <include>${medieplatform}:${vhsingest.doms.ingester}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

        <dependencySet>
            <useProjectArtifact>false</useProjectArtifact>
            <outputDirectory>${vhsingest.components.dir}/${vhsingest.doms.ingester}/bin</outputDirectory>
            <directoryMode>0744</directoryMode>
            <useTransitiveDependencies>false</useTransitiveDependencies>
            <unpack>true</unpack>
            <unpackOptions>
                <includes>
                    <include>${vhsingest.doms.ingester}-*.jar</include>
                </includes>
            </unpackOptions>
            <includes>
                <include>${medieplatform}:${vhsingest.doms.ingester}</include>
            </includes>
            <scope>runtime</scope>
        </dependencySet>

    </dependencySets>


    <fileSets>

        <fileSet>
            <outputDirectory>${vhsingest.bin}</outputDirectory>
            <directory>src/main/bin</directory>
            <directoryMode>0744</directoryMode>
            <fileMode>0700</fileMode>
            <filtered>true</filtered>
        </fileSet>
        <fileSet>
            <outputDirectory>integrationTests</outputDirectory>
            <directory>src/main/integrationTests</directory>
            <fileMode>0700</fileMode>
            <filtered>true</filtered>
        </fileSet>

        <fileSet>
            <outputDirectory>${vhsingest.script.dir}</outputDirectory>
            <directory>src/main/env</directory>
            <directoryMode>0744</directoryMode>
            <fileMode>0700</fileMode>
            <filtered>true</filtered>
        </fileSet>

        <fileSet>
            <outputDirectory>${vhsingest.components.dir}</outputDirectory>
            <directory>src/main/components</directory>
            <directoryMode>0744</directoryMode>
            <fileMode>0700</fileMode>
            <filtered>true</filtered>
        </fileSet>


        <fileSet>
            <outputDirectory>${vhsingest.workflow.dir}</outputDirectory>
            <directoryMode>0744</directoryMode>
            <directory>src/main/taverna</directory>
            <filtered>true</filtered>
        </fileSet>

        <fileSet>
            <outputDirectory>examples</outputDirectory>
            <directoryMode>0744</directoryMode>
            <directory>src/main/examples</directory>
        </fileSet>
    </fileSets>

    <files>
        <file>
            <source>src/main/scripts/bitstorage.ingest.sh</source>
            <outputDirectory>${vhsingest.script.dir}</outputDirectory>
            <destName>${bitstorage.ingest}.sh</destName>
            <fileMode>0700</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/scripts/ffprobe.characteriser.sh</source>
            <outputDirectory>${vhsingest.script.dir}</outputDirectory>
            <destName>${ffprobe.characteriser}.sh</destName>
            <fileMode>0700</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/scripts/ffprobe.profile.validator.sh</source>
            <outputDirectory>${vhsingest.script.dir}</outputDirectory>
            <destName>${ffprobe.profile.validator}.sh</destName>
            <fileMode>0700</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/scripts/vhsingest.doms.ingester.sh</source>
            <outputDirectory>${vhsingest.script.dir}</outputDirectory>
            <destName>${vhsingest.doms.ingester}.sh</destName>
            <fileMode>0700</fileMode>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/scripts/master.validator.sh</source>
            <outputDirectory>${vhsingest.script.dir}</outputDirectory>
            <destName>${master.validator}.sh</destName>
            <fileMode>0700</fileMode>
            <filtered>true</filtered>
        </file>
    </files>


</assembly>

